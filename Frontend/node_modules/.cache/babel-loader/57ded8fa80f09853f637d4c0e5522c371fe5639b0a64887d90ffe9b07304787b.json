{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import RestaurantCard from'./RestaurantCard';import'./RestaurantList.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RestaurantList=()=>{const[restaurants,setRestaurants]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[isLoading,setIsLoading]=useState(false);useEffect(()=>{const fetchRestaurants=async()=>{setIsLoading(true);try{const response=await axios.get(`http://localhost:3000/api/restaurants?page=${currentPage}&limit=12`);console.log(\"API response:\",response.data);if(Array.isArray(response.data)){setRestaurants(response.data);setTotalPages(response.data.totalPages||1);}else if(Array.isArray(response.data.restaurants)){setRestaurants(response.data.restaurants);setTotalPages(response.data.totalPages||1);}else{console.error(\"Unexpected data structure:\",response.data);}}catch(error){console.error(\"Error fetching restaurants:\",error);}setIsLoading(false);};fetchRestaurants();},[currentPage]);const handlePageChange=newPage=>{if(newPage>0&&newPage<=totalPages){setCurrentPage(newPage);}};return/*#__PURE__*/_jsx(\"div\",{className:\"restaurant-list\",children:isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cards-container\",children:restaurants.map(restaurant=>/*#__PURE__*/_jsx(RestaurantCard,{restaurant:restaurant},restaurant.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(currentPage-1),disabled:currentPage===1,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",currentPage,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(currentPage+1),disabled:currentPage===totalPages,children:\"Next\"})]})]})});};export default RestaurantList;","map":{"version":3,"names":["React","useEffect","useState","axios","RestaurantCard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RestaurantList","restaurants","setRestaurants","currentPage","setCurrentPage","totalPages","setTotalPages","isLoading","setIsLoading","fetchRestaurants","response","get","console","log","data","Array","isArray","error","handlePageChange","newPage","className","children","map","restaurant","id","onClick","disabled"],"sources":["C:/Users/sairam/Projects/Zomato-Clone/Frontend/src/components/RestaurantList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport RestaurantCard from './RestaurantCard';\r\nimport './RestaurantList.css';\r\n\r\nconst RestaurantList = () => {\r\n    const [restaurants, setRestaurants] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [totalPages, setTotalPages] = useState(1);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchRestaurants = async () => {\r\n            setIsLoading(true);\r\n            try {\r\n                const response = await axios.get(`http://localhost:3000/api/restaurants?page=${currentPage}&limit=12`);\r\n                console.log(\"API response:\", response.data);\r\n\r\n                if (Array.isArray(response.data)) {\r\n                    setRestaurants(response.data);\r\n                    setTotalPages(response.data.totalPages || 1);\r\n                } else if (Array.isArray(response.data.restaurants)) {\r\n                    setRestaurants(response.data.restaurants);\r\n                    setTotalPages(response.data.totalPages || 1);\r\n                } else {\r\n                    console.error(\"Unexpected data structure:\", response.data);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error fetching restaurants:\", error);\r\n            }\r\n            setIsLoading(false);\r\n        };\r\n\r\n        fetchRestaurants();\r\n    }, [currentPage]);\r\n\r\n    const handlePageChange = (newPage) => {\r\n        if (newPage > 0 && newPage <= totalPages) {\r\n            setCurrentPage(newPage);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"restaurant-list\">\r\n            {isLoading ? (\r\n                <p>Loading...</p>\r\n            ) : (\r\n                <>\r\n                    <div className=\"cards-container\">\r\n                        {restaurants.map(restaurant => (\r\n                            <RestaurantCard key={restaurant.id} restaurant={restaurant} />\r\n                        ))}\r\n                    </div>\r\n                    <div className=\"pagination\">\r\n                        <button onClick={() => handlePageChange(currentPage - 1)} disabled={currentPage === 1}>\r\n                            Previous\r\n                        </button>\r\n                        <span>Page {currentPage} of {totalPages}</span>\r\n                        <button onClick={() => handlePageChange(currentPage + 1)} disabled={currentPage === totalPages}>\r\n                            Next\r\n                        </button>\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RestaurantList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}